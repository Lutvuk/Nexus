<div class="nexus-card p-4 group cursor-pointer hover:shadow-lg hover:shadow-violet-500/10 mb-3">
    <!-- Card Content -->
    <div class="group relative" (dblclick)="enableEdit()">

        @if (!isEditing) {
        <h3 class="font-medium text-white pr-6 break-words">{{ card.title }}</h3>

        <!-- Actions (Visible on Hover) -->
        <div class="absolute top-0 right-0 opacity-0 group-hover:opacity-100 transition-opacity flex gap-1">
            <button (click)="enableEdit(); $event.stopPropagation()"
                class="text-white/40 hover:text-white p-1 rounded hover:bg-white/10" title="Edit">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
            </button>
            <button (click)="deleteCard(); $event.stopPropagation()"
                class="text-white/40 hover:text-red-400 p-1 rounded hover:bg-white/10" title="Delete">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </button>
        </div>
        } @else {
        <input type="text" [(ngModel)]="editedTitle" (blur)="saveEdit()" (keydown.enter)="saveEdit()"
            (keydown.escape)="cancelEdit()" autoFocus
            class="w-full bg-white/10 border border-violet-500/50 rounded px-2 py-1 text-white focus:outline-none focus:ring-1 focus:ring-violet-500 text-sm">
        }
    </div>

    <div class="flex items-center justify-between mt-3">
        <div class="px-2 py-1 rounded bg-white/5 text-[10px] text-white/50 border border-white/5">
            TASK-{{ card.position + 1 }}
        </div>
    </div>
</div>